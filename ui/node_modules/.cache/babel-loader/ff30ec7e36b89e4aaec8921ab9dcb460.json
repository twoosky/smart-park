{"ast":null,"code":"var _jsxFileName = \"/home/haneul/toiot_0219/toiot-1/ui/src/ManagementComponents/Register/RegisterSensor.tsx\";\nimport React, { Component } from 'react';\nimport { SENSOR_URL } from '../../defineUrl'; // form : https://getbootstrap.com/docs/4.0/components/forms/?\n// add, delete input : https://codesandbox.io/s/00xq32n3pn?from-embed=&file=/src/index.js\n\n/* \nRegisterSensor\n- Show modal to register sensor\n*/\nclass RegisterSensor extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      sensor_values: [{\n        value_name: ''\n      }],\n      name: '',\n      nameValid: false,\n      valueValid: false\n    };\n\n    this.handleNameChange = e => {\n      // name valid check : user should enter sensor name\n      if (e.target.value.length > 0) {\n        this.setState({\n          name: e.target.value,\n          nameValid: true\n        });\n      } else {\n        this.setState({\n          name: e.target.value,\n          nameValid: false\n        });\n      }\n    };\n\n    this.handleValueChange = idx => e => {\n      // Value list is updated dynamic. Its element can be added or removed freely.\n      // so find changing field by using received idx and change state.\n      const newsensor_values = this.state.sensor_values.map((value, sidx) => {\n        if (idx !== sidx) return value;\n        return { ...value,\n          value_name: e.target.value\n        };\n      }); // value list valid check : User should enter more than a value and each value input field should be filled\n\n      if (newsensor_values !== null && !newsensor_values.some(value => value.value_name === '') && // find empty field\n      newsensor_values[idx].value_name.length > 0) {\n        this.setState({\n          sensor_values: newsensor_values,\n          valueValid: true\n        });\n      } else {\n        this.setState({\n          sensor_values: newsensor_values,\n          valueValid: false\n        });\n      }\n    };\n\n    this.handleAddClick = () => {\n      // Add a value list elem\n      this.setState({\n        sensor_values: [...this.state.sensor_values, {\n          value_name: ''\n        }]\n      });\n    };\n\n    this.handleRemoveClick = idx => () => {\n      // Remove #idx value list elem which user picked\n      this.setState({\n        sensor_values: this.state.sensor_values.filter((s, sidx) => idx !== sidx)\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      var url = SENSOR_URL;\n      var data = this.state; // Valid check (unvalid -> alert)\n\n      if (!this.state.nameValid) {\n        alert('Please enter sensor name.');\n        return;\n      }\n\n      if (!this.state.valueValid) {\n        alert('Please enter value name.');\n        return;\n      } // Check whether user really want to submit\n\n\n      var submitValid;\n      submitValid = window.confirm('Are you sure to register this sensor?');\n\n      if (!submitValid) {\n        return;\n      }\n\n      fetch(url, {\n        method: 'POST',\n        // or 'PUT'\n        body: JSON.stringify(data),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(response => console.log('Success:', JSON.stringify(response))).catch(error => console.error('Error:', error)).then(() => window.location.reload(false));\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal fade\",\n      id: \"register-sensor-modal\",\n      role: \"dialog\",\n      \"aria-labelledby\": \"register-sensor-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-dialog\",\n      role: \"document\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"modal-title\",\n      id: \"register-sensor-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }\n    }, \"Register sensor\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 10\n      }\n    }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }\n    }, \"Sensor name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"name\",\n      placeholder: \"name\",\n      value: this.state.name,\n      onChange: this.handleNameChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, \"Value name\"), this.state.sensor_values.map((value, idx) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 15\n      }\n    }, idx)), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"sensor_values\",\n      placeholder: 'Enter value name',\n      value: value.value_name,\n      onChange: this.handleValueChange(idx),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 14\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-append\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm\",\n      type: \"button\",\n      id: \"button-addon2\",\n      onClick: this.handleRemoveClick(idx),\n      style: {\n        background: 'pink'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      className: \"bi bi-trash-fill\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }\n    }))))))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn\",\n      onClick: this.handleAddClick,\n      style: {\n        background: 'pink'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 10\n      }\n    }, \"Add value\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn\",\n      onClick: this.handleSubmit,\n      style: {\n        background: 'pink'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 10\n      }\n    }, \"Submit\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-default\",\n      \"data-dismiss\": \"modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 10\n      }\n    }, \"Cancel\")))))));\n  }\n\n}\n\nexport default RegisterSensor;","map":{"version":3,"sources":["/home/haneul/toiot_0219/toiot-1/ui/src/ManagementComponents/Register/RegisterSensor.tsx"],"names":["React","Component","SENSOR_URL","RegisterSensor","state","sensor_values","value_name","name","nameValid","valueValid","handleNameChange","e","target","value","length","setState","handleValueChange","idx","newsensor_values","map","sidx","some","handleAddClick","handleRemoveClick","filter","s","handleSubmit","preventDefault","url","data","alert","submitValid","window","confirm","fetch","method","body","JSON","stringify","headers","then","res","json","response","console","log","catch","error","location","reload","render","background"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { SENSOR_URL } from '../../defineUrl';\n// form : https://getbootstrap.com/docs/4.0/components/forms/?\n// add, delete input : https://codesandbox.io/s/00xq32n3pn?from-embed=&file=/src/index.js\n\ninterface RegisterSensorState {\n\tsensor_values: Array<value_list_elem>;\n\tname: string;\n\tnameValid: boolean;\n\tvalueValid: boolean;\n}\n\ninterface value_list_elem {\n\tvalue_name: string;\n}\n\n/* \nRegisterSensor\n- Show modal to register sensor\n*/\nclass RegisterSensor extends Component<{}, RegisterSensorState> {\n\tstate: RegisterSensorState = {\n\t\tsensor_values: [{ value_name: '' }],\n\t\tname: '',\n\t\tnameValid: false,\n\t\tvalueValid: false,\n\t};\n\n\t// Handle node name change by typing\n\thandleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t// name valid check : user should enter sensor name\n\t\tif (e.target.value.length > 0) {\n\t\t\tthis.setState({\n\t\t\t\tname: e.target.value,\n\t\t\t\tnameValid: true,\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tname: e.target.value,\n\t\t\t\tnameValid: false,\n\t\t\t});\n\t\t}\n\t};\n\n\t// Handle value's name change by typing\n\thandleValueChange = (idx: number) => (\n\t\te: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\t// Value list is updated dynamic. Its element can be added or removed freely.\n\t\t// so find changing field by using received idx and change state.\n\t\tconst newsensor_values = this.state.sensor_values.map(\n\t\t\t(value: value_list_elem, sidx: number) => {\n\t\t\t\tif (idx !== sidx) return value;\n\t\t\t\treturn { ...value, value_name: e.target.value };\n\t\t\t}\n\t\t);\n\n\t\t// value list valid check : User should enter more than a value and each value input field should be filled\n\t\tif (\n\t\t\tnewsensor_values !== null &&\n\t\t\t!newsensor_values.some((value) => value.value_name === '') && // find empty field\n\t\t\tnewsensor_values[idx].value_name.length > 0\n\t\t) {\n\t\t\tthis.setState({ sensor_values: newsensor_values, valueValid: true });\n\t\t} else {\n\t\t\tthis.setState({ sensor_values: newsensor_values, valueValid: false });\n\t\t}\n\t};\n\n\t// Handle click event of the Add button\n\thandleAddClick = () => {\n\t\t// Add a value list elem\n\t\tthis.setState({\n\t\t\tsensor_values: [...this.state.sensor_values, { value_name: '' }],\n\t\t});\n\t};\n\n\t// Handle click event of the Remove button\n\thandleRemoveClick = (idx: number) => () => {\n\t\t// Remove #idx value list elem which user picked\n\t\tthis.setState({\n\t\t\tsensor_values: this.state.sensor_values.filter(\n\t\t\t\t(s: any, sidx: number) => idx !== sidx\n\t\t\t),\n\t\t});\n\t};\n\n\t// Handle submit button click event\n\thandleSubmit = (e: React.MouseEvent<HTMLButtonElement>) => {\n\t\te.preventDefault();\n\n\t\tvar url = SENSOR_URL;\n\t\tvar data = this.state;\n\n\t\t// Valid check (unvalid -> alert)\n\t\tif (!this.state.nameValid) {\n\t\t\talert('Please enter sensor name.');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.state.valueValid) {\n\t\t\talert('Please enter value name.');\n\t\t\treturn;\n\t\t}\n\n\t\t// Check whether user really want to submit\n\t\tvar submitValid: boolean;\n\t\tsubmitValid = window.confirm('Are you sure to register this sensor?');\n\t\tif (!submitValid) {\n\t\t\treturn;\n\t\t}\n\n\t\tfetch(url, {\n\t\t\tmethod: 'POST', // or 'PUT'\n\t\t\tbody: JSON.stringify(data),\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then((response) => console.log('Success:', JSON.stringify(response)))\n\t\t\t.catch((error) => console.error('Error:', error))\n\t\t\t.then(() => window.location.reload(false));\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"modal fade\"\n\t\t\t\t\tid=\"register-sensor-modal\"\n\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\taria-labelledby=\"register-sensor-modal\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"modal-dialog\" role=\"document\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<h4 className=\"modal-title\" id=\"register-sensor-modal\">\n\t\t\t\t\t\t\t\t\tRegister sensor\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"close\"\n\t\t\t\t\t\t\t\t\tdata-dismiss=\"modal\"\n\t\t\t\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">Ã—</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<label>Sensor name</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"name\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.name}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleNameChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<label>Value name</label>\n\t\t\t\t\t\t\t\t\t\t{this.state.sensor_values.map(\n\t\t\t\t\t\t\t\t\t\t\t(value: value_list_elem, idx: number) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group mb-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group-prepend\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"input-group-text\">{idx}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"sensor_values\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={'Enter value name'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={value.value_name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleValueChange(idx)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group-append\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"button-addon2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleRemoveClick(idx)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ background: 'pink' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"1em\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"bi bi-trash-fill\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.handleAddClick}\n\t\t\t\t\t\t\t\t\t\tstyle={{ background: 'pink' }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tAdd value\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.handleSubmit}\n\t\t\t\t\t\t\t\t\t\tstyle={{ background: 'pink' }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-default\"\n\t\t\t\t\t\t\t\t\t\tdata-dismiss=\"modal\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RegisterSensor;\n"]},"metadata":{},"sourceType":"module"}