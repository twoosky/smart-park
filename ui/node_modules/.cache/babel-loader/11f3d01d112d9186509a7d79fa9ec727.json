{"ast":null,"code":"var _jsxFileName = \"/home/haneul/toiot_copy/toiot-1/ui/src/ManagementComponents/Table/SensorTable.tsx\";\nimport React, { Component } from 'react';\nimport { SENSOR_URL } from '../../defineUrl';\nimport Pagination from '../Pagination'; //import DeleteRequest from './DeleteRequest'\n\n/*\nSensorTable\n- Show up sensor list.\n*/\nclass SensorTable extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      sensorList: [],\n      currentPage: 1,\n      // current page number\n      pages: 0\n    };\n\n    this.handleRemoveClick = sensor_id => () => {\n      var url = SENSOR_URL + '/' + sensor_id;\n      fetch(url, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).catch(error => console.error('Error:', error)).then(() => window.location.reload(false));\n    };\n\n    this.handlePageChange = page => {\n      this.setState({\n        currentPage: page\n      });\n      this.getsensorList(page);\n    };\n  }\n\n  componentDidMount() {\n    this.getsensorList(this.state.currentPage);\n  } // Get sensor list from backend per page\n\n\n  getsensorList(page) {\n    var url = SENSOR_URL + '?page=' + page;\n    fetch(url).then(res => res.json()).then(data => {\n      page === 1 ? this.setState({\n        sensorList: data.sensors,\n        pages: data.pages\n      }) : this.setState({\n        sensorList: data.sensors\n      });\n    }).catch(error => console.error('Error:', error));\n  } // Handle click event of the Remove button\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 8\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 8\n      }\n    }, \"name\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 8\n      }\n    }, \"id\"), /*#__PURE__*/React.createElement(\"td\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 8\n      }\n    }, \"kind\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 8\n      }\n    }, \"values\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 8\n      }\n    }))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 6\n      }\n    }, this.state.sensorList.map((sensor, idx) => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 10\n      }\n    }, idx + 10 * (this.state.currentPage - 1)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 10\n      }\n    }, sensor.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 10\n      }\n    }, sensor.id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 10\n      }\n    }, sensor.kind), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 10\n      }\n    }, sensor.sensor_values.map(value => value.value_name + ', ')), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-default btn-sm\",\n      type: \"button\",\n      id: \"button-delete\",\n      onClick: this.handleRemoveClick(sensor.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      className: \"bi bi-trash-fill\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    })))))))), /*#__PURE__*/React.createElement(Pagination, {\n      pages: this.state.pages,\n      currentPage: this.state.currentPage,\n      onPageChange: this.handlePageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 5\n      }\n    }));\n  }\n\n}\n\nexport default SensorTable;","map":{"version":3,"sources":["/home/haneul/toiot_copy/toiot-1/ui/src/ManagementComponents/Table/SensorTable.tsx"],"names":["React","Component","SENSOR_URL","Pagination","SensorTable","state","sensorList","currentPage","pages","handleRemoveClick","sensor_id","url","fetch","method","headers","then","res","json","catch","error","console","window","location","reload","handlePageChange","page","setState","getsensorList","componentDidMount","data","sensors","render","map","sensor","idx","name","id","kind","sensor_values","value","value_name"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n\tsensorListElem,\n\tvalue_list_elem,\n} from '../../ElemInterface/ElementsInterface';\nimport { SENSOR_URL } from '../../defineUrl';\nimport Pagination from '../Pagination';\n\n//import DeleteRequest from './DeleteRequest'\n\ninterface SensorTableState {\n\tsensorList: Array<sensorListElem>;\n\tcurrentPage: number;\n\tpages: number; // num of total pages\n}\n\n/*\nSensorTable\n- Show up sensor list.\n*/\nclass SensorTable extends Component<{}, SensorTableState> {\n\tstate: SensorTableState = {\n\t\tsensorList: [],\n\t\tcurrentPage: 1, // current page number\n\t\tpages: 0,\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.getsensorList(this.state.currentPage);\n\t}\n\n\t// Get sensor list from backend per page\n\tgetsensorList(page: number) {\n\t\tvar url = SENSOR_URL + '?page=' + page;\n\n\t\tfetch(url)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data) => {\n\t\t\t\tpage === 1\n\t\t\t\t\t? this.setState({ sensorList: data.sensors, pages: data.pages })\n\t\t\t\t\t: this.setState({ sensorList: data.sensors });\n\t\t\t})\n\t\t\t.catch((error) => console.error('Error:', error));\n\t}\n\n\t// Handle click event of the Remove button\n\thandleRemoveClick = (sensor_id: number) => () => {\n\t\tvar url = SENSOR_URL + '/' + sensor_id;\n\n\t\tfetch(url, {\n\t\t\tmethod: 'DELETE',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.catch((error) => console.error('Error:', error))\n\t\t\t.then(() => window.location.reload(false));\n\t};\n\n\thandlePageChange = (page: number) => {\n\t\tthis.setState({ currentPage: page });\n\t\tthis.getsensorList(page);\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<table className=\"table\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th scope=\"col\">#</th>\n\t\t\t\t\t\t\t<th scope=\"col\">name</th>\n\t\t\t\t\t\t\t<th scope=\"col\">id</th>\n\t\t\t\t\t\t\t<td scope=\"col\">kind</td>\n\t\t\t\t\t\t\t<th scope=\"col\">values</th>\n\t\t\t\t\t\t\t<th scope=\"col\"></th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{this.state.sensorList.map(\n\t\t\t\t\t\t\t(sensor: sensorListElem, idx: number) => (\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th scope=\"row\">{idx + 10 * (this.state.currentPage - 1)}</th>\n\t\t\t\t\t\t\t\t\t<td>{sensor.name}</td>\n\t\t\t\t\t\t\t\t\t<td>{sensor.id}</td>\n\t\t\t\t\t\t\t\t\t<td>{sensor.kind}</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{sensor.sensor_values.map(\n\t\t\t\t\t\t\t\t\t\t\t(value: value_list_elem) => value.value_name +', '\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-default btn-sm\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"button-delete\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleRemoveClick(sensor.id)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\n\t\t\t\t\t\t\t\t\t\t\t\theight=\"1em\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"bi bi-trash-fill\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t<Pagination\n\t\t\t\t\tpages={this.state.pages}\n\t\t\t\t\tcurrentPage={this.state.currentPage}\n\t\t\t\t\tonPageChange={this.handlePageChange}\n\t\t\t\t></Pagination>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default SensorTable;\n"]},"metadata":{},"sourceType":"module"}