{"ast":null,"code":"var _jsxFileName = \"/home/haneul/toiot_0219/toiot-1/ui/src/ManagementComponents/Register/RegisterSink.tsx\";\nimport React, { Component } from 'react';\nimport Select from 'react-select';\nimport { SINK_URL, TOPIC_URL } from '../../defineUrl';\n\n/* \nRegisterSink\n- Show modal to register sink\n*/\nclass RegisterSink extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      topicList: [],\n      name: '',\n      topic_id: 0,\n      ip: '',\n      nameValid: false,\n      topicValid: false,\n      ipValid: false\n    };\n\n    this.handleNameChange = e => {\n      // name valid check : user should enter sink name\n      if (e.target.value.length > 0) {\n        this.setState({\n          name: e.target.value,\n          nameValid: true\n        });\n      } else {\n        this.setState({\n          name: e.target.value,\n          nameValid: false\n        });\n      }\n    };\n\n    this.handleTopicChange = topic => {\n      // sensor valid check : user should select sensor\n      if (topic !== null) {\n        this.setState({\n          topic_id: topic.id,\n          topicValid: true\n        });\n      } else {\n        this.setState({\n          topic_id: topic.id,\n          topicValid: false\n        });\n      }\n    };\n\n    this.handleIpChange = e => {\n      // Regular expression of check the ip:port format\n      const ipportRegExp = /^[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}:[0-9]{4,5}/; // ip:port valid check : user should enter correct format of ip:port.\n\n      if (e.target.value.match(ipportRegExp)) {\n        this.setState({\n          ip: e.target.value,\n          ipValid: true\n        });\n      } else {\n        this.setState({\n          ip: e.target.value,\n          ipValid: false\n        });\n      }\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      var url = SINK_URL;\n      var data = this.state; // Valid check (unvalid -> alert)\n\n      if (!this.state.nameValid) {\n        alert('Please enter sink.');\n        return;\n      }\n\n      if (!this.state.topicValid) {\n        alert('Please select topic.');\n        return;\n      }\n\n      if (!this.state.ipValid) {\n        alert('Please enter valid type of ip:port.');\n        return;\n      } // Check whether user really want to submit\n\n\n      var submitValid;\n      submitValid = window.confirm('Are you sure to register this sink?');\n\n      if (!submitValid) {\n        return;\n      }\n\n      fetch(url, {\n        method: 'POST',\n        // or 'PUT'\n        body: JSON.stringify({\n          name: this.state.name,\n          addr: this.state.ip,\n          topic_id: this.state.topic_id\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(response => console.log('Success:', JSON.stringify(response))).catch(error => console.error('Error:', error)).then(() => window.location.reload(false));\n    };\n  }\n\n  componentDidMount() {\n    this.gettopicList();\n  } // Get topic list from backend\n\n\n  gettopicList() {\n    var url = TOPIC_URL;\n    fetch(url).then(res => res.json()).then(data => this.setState({\n      topicList: data\n    })).catch(error => console.error('Error:', error));\n  } // Handle node name change by typing\n\n\n  render() {\n    let topicOptions;\n    topicOptions = this.state.topicList.map(val => {\n      return {\n        label: val.name,\n        value: val.name,\n        id: val.id\n      };\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal fade\",\n      id: \"register-sink-modal\",\n      role: \"dialog\",\n      \"aria-labelledby\": \"register-sink-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-dialog\",\n      role: \"document\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"modal-title\",\n      id: \"register-sink-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }\n    }, \"Register sink\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 10\n      }\n    }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }\n    }, \"Sink name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"name\",\n      placeholder: \"name\",\n      value: this.state.name,\n      onChange: this.handleNameChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }\n    }, \"Select topic\"), /*#__PURE__*/React.createElement(Select, {\n      name: \"topic\",\n      options: topicOptions,\n      classNamePrefix: \"select\",\n      onChange: this.handleTopicChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }\n    }, \"ip:port\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"ip\",\n      placeholder: \"ex) 123.123.123:8080\",\n      value: this.state.ip,\n      onChange: this.handleIpChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn\",\n      onClick: this.handleSubmit,\n      style: {\n        background: 'pink'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 10\n      }\n    }, \"Submit\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-default\",\n      \"data-dismiss\": \"modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 10\n      }\n    }, \"Cancel\")))))));\n  }\n\n}\n\nexport default RegisterSink;","map":{"version":3,"sources":["/home/haneul/toiot_0219/toiot-1/ui/src/ManagementComponents/Register/RegisterSink.tsx"],"names":["React","Component","Select","SINK_URL","TOPIC_URL","RegisterSink","state","topicList","name","topic_id","ip","nameValid","topicValid","ipValid","handleNameChange","e","target","value","length","setState","handleTopicChange","topic","id","handleIpChange","ipportRegExp","match","handleSubmit","preventDefault","url","data","alert","submitValid","window","confirm","fetch","method","body","JSON","stringify","addr","headers","then","res","json","response","console","log","catch","error","location","reload","componentDidMount","gettopicList","render","topicOptions","map","val","label","background"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Select from 'react-select';\nimport { SINK_URL, TOPIC_URL } from '../../defineUrl';\nimport { topicListElem, topicOptionsElem } from '../../ElemInterface/ElementsInterface';\n// form : https://getbootstrap.com/docs/4.0/components/forms/?\n// add, delete input : https://codesandbox.io/s/00xq32n3pn?from-embed=&file=/src/index.js\n\ninterface RegisterSinkState {\n\ttopicList: Array<topicListElem>;\n\tname: string;\n\ttopic_id: number;\n\tip: string;\n\tnameValid: boolean;\n\ttopicValid: boolean;\n\tipValid: boolean;\n}\n\n/* \nRegisterSink\n- Show modal to register sink\n*/\nclass RegisterSink extends Component<{}, RegisterSinkState> {\n\tstate: RegisterSinkState = {\n\t\ttopicList: [],\n\t\tname: '',\n\t\ttopic_id: 0,\n\t\tip: '',\n\t\tnameValid: false,\n\t\ttopicValid: false,\n\t\tipValid: false,\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.gettopicList();\n\t}\n\n\t// Get topic list from backend\n\tgettopicList() {\n\t\tvar url = TOPIC_URL;\n\n\t\tfetch(url)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data) => this.setState({ topicList: data }))\n\t\t\t.catch((error) => console.error('Error:', error));\n\t}\n\n\t// Handle node name change by typing\n\thandleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t// name valid check : user should enter sink name\n\t\tif (e.target.value.length > 0) {\n\t\t\tthis.setState({\n\t\t\t\tname: e.target.value,\n\t\t\t\tnameValid: true,\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tname: e.target.value,\n\t\t\t\tnameValid: false,\n\t\t\t});\n\t\t}\n\t};\n\n\t// Handle selected sensor change by selecting sensors\n\thandleTopicChange = (topic: any) => {\n\t\t// sensor valid check : user should select sensor\n\t\tif (topic !== null) {\n\t\t\tthis.setState({\n\t\t\t\ttopic_id: topic.id,\n\t\t\t\ttopicValid: true,\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\ttopic_id: topic.id,\n\t\t\t\ttopicValid: false,\n\t\t\t});\n\t\t}\n\t};\n\n\n\t// Handle ip:port change by typing\n\thandleIpChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t// Regular expression of check the ip:port format\n\t\tconst ipportRegExp = /^[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}:[0-9]{4,5}/;\n\n\t\t// ip:port valid check : user should enter correct format of ip:port.\n\t\tif (e.target.value.match(ipportRegExp)) {\n\t\t\tthis.setState({\n\t\t\t\tip: e.target.value,\n\t\t\t\tipValid: true,\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tip: e.target.value,\n\t\t\t\tipValid: false,\n\t\t\t});\n\t\t}\n\t};\n\n\t// Handle submit button click event\n\thandleSubmit = (e: React.MouseEvent<HTMLButtonElement>) => {\n\t\te.preventDefault();\n\n\t\tvar url = SINK_URL;\n\t\tvar data = this.state;\n\n\t\t// Valid check (unvalid -> alert)\n\t\tif (!this.state.nameValid) {\n\t\t\talert('Please enter sink.');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.state.topicValid) {\n\t\t\talert('Please select topic.');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.state.ipValid) {\n\t\t\talert('Please enter valid type of ip:port.');\n\t\t\treturn;\n\t\t}\n\n\t\t// Check whether user really want to submit\n\t\tvar submitValid: boolean;\n\t\tsubmitValid = window.confirm('Are you sure to register this sink?');\n\t\tif (!submitValid) {\n\t\t\treturn;\n\t\t}\n\n\t\tfetch(url, {\n\t\t\tmethod: 'POST', // or 'PUT'\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: this.state.name,\n\t\t\t\taddr: this.state.ip,\n\t\t\t\ttopic_id: this.state.topic_id,\n\t\t\t}),\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then((response) => console.log('Success:', JSON.stringify(response)))\n\t\t\t.catch((error) => console.error('Error:', error))\n\t\t\t.then(() => window.location.reload(false));\n\t};\n\n\trender() {\n\t\tlet topicOptions: Array<topicOptionsElem>;\n\t\ttopicOptions = this.state.topicList.map((val: topicListElem) => {\n\t\t\treturn {\n\t\t\t\tlabel: val.name,\n\t\t\t\tvalue: val.name,\n\t\t\t\tid: val.id,\n\t\t\t};\n\t\t});\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"modal fade\"\n\t\t\t\t\tid=\"register-sink-modal\"\n\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\taria-labelledby=\"register-sink-modal\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"modal-dialog\" role=\"document\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<h4 className=\"modal-title\" id=\"register-sink-modal\">\n\t\t\t\t\t\t\t\t\tRegister sink\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"close\"\n\t\t\t\t\t\t\t\t\tdata-dismiss=\"modal\"\n\t\t\t\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">×</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<label>Sink name</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"name\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.name}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleNameChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<label>Select topic</label>\n\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\tname=\"topic\"\n\t\t\t\t\t\t\t\t\t\t\toptions={topicOptions}\n\t\t\t\t\t\t\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleTopicChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<label>ip:port</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"ip\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"ex) 123.123.123:8080\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.ip}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleIpChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.handleSubmit}\n\t\t\t\t\t\t\t\t\t\tstyle={{ background: 'pink' }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-default\"\n\t\t\t\t\t\t\t\t\t\tdata-dismiss=\"modal\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RegisterSink;\n"]},"metadata":{},"sourceType":"module"}